<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <title>Gestionnaire de fichiers</title>
</head>
<body>
    <div id="app">
        <h1>Gestionnaire de fichiers</h1>
        <div v-for="file in files">
            {{file.filename}}
        </div>
    </div>
</body>
<script>
    const { createApp } = Vue
    createApp({

      data() {
        return {
            apiUrl: window.location.toString().slice(0, -1),
            path: '~',
            files: [],
        }
      },

      async mounted() {
        await this.listFiles()
      },

      methods: {
        async listFiles() {
            const response = await axios.post(`${this.apiUrl}/list-directory`, {
                path: this.path,
            })
            this.files = response.data
        },
      }
    }).mount('#app')
  </script>

</html>
